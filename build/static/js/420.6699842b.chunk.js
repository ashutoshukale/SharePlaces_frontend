"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[420],{1420:(e,r,s)=>{s.r(r),s.d(r,{DUMMY_PLACES:()=>f,default:()=>C});var t=s(5043),a=s(8347),n=s(837),l=s(8630),o=s(8705),c=s(579);const i=e=>{let{text:r}=e;return(0,c.jsx)("div",{children:r})},d=e=>{const r=(0,t.useRef)();(0,t.useEffect)((()=>{}),[]);const s={center:e.center,zoom:e.zoom};return(0,c.jsx)("div",{ref:r,className:`map ${e.className}`,style:{height:"100%",width:"100%"},children:(0,c.jsx)(o.Ay,{bootstrapURLKeys:{key:""},defaultCenter:s.center,defaultZoom:s.zoom,children:(0,c.jsx)(i,{lng:s.center.lng,lat:s.center.lat,text:"My Marker"})})})};var h=s(6886),m=s(171),u=s(9626),p=s(8863);const x=e=>{const r=(0,t.useContext)(h.c),[s,o]=(0,t.useState)(!1),[i,x]=(0,t.useState)(!1),j=()=>o(!1),{isLoading:_,sendRequest:f,error:C,clearError:g}=(0,m.x)(),E=()=>{x(!1)};return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(u.A,{error:C,onClear:g}),(0,c.jsx)(l.A,{show:s,onCancel:j,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,c.jsx)(a.A,{onClick:j,children:"CLOSE"}),children:(0,c.jsx)("div",{className:"map-container",children:(0,c.jsx)(d,{center:e.coordinates,zoom:16})})}),(0,c.jsx)(l.A,{show:i,header:"Are your Sure ?",footerClass:"place-item__modal-actions",footer:(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(a.A,{inverse:!0,onClick:E,children:"CANCEL"}),(0,c.jsx)(a.A,{danger:!0,onClick:async()=>{x(!1);try{await f(`https://shareplaces-3oeh.onrender.com/api/places/${e.id}`,"DELETE",null,{Authorization:"Bearer "+r.token});e.onDelete(e.id)}catch(s){}},children:"DELETE"})]}),onCancel:E,children:(0,c.jsx)("p",{children:"Do you want to proceed and delete this place ? Please note that it can't be undone"})}),(0,c.jsx)("li",{className:"place-item",children:(0,c.jsxs)(n.A,{className:"place-item__content",children:[_&&(0,c.jsx)("div",{className:"center",children:(0,c.jsx)(p.A,{asOverlay:!0})}),(0,c.jsx)("div",{className:"place-item__image",children:(0,c.jsx)("img",{src:`https://shareplaces-3oeh.onrender.com/${e.image}`,alt:e.title})}),(0,c.jsxs)("div",{className:"place-item__info",children:[(0,c.jsx)("h2",{children:e.title}),(0,c.jsx)("h3",{children:e.address}),(0,c.jsx)("p",{children:e.description})]}),(0,c.jsxs)("div",{className:"place-item__actions",children:[(0,c.jsx)(a.A,{inverse:!0,onClick:()=>o(!0),children:"VIEW ON MAP"}),r.userId===e.creatorId&&(0,c.jsx)(a.A,{to:`/places/${e.id}`,children:"EDIT THIS PLACE"}),r.userId===e.creatorId&&(0,c.jsx)(a.A,{danger:!0,onClick:()=>{x(!0)},children:"DELETE"})]})]})})]})},j=e=>0===e.items.length?(0,c.jsx)("div",{className:"place-list center",children:(0,c.jsxs)(n.A,{children:[(0,c.jsx)("h2",{children:"No Places Found. Maybe Create One?"}),(0,c.jsx)(a.A,{to:"/places/new",children:"Share Place"})]})}):(0,c.jsx)("ul",{className:"place-list",children:e.items.map((r=>(0,c.jsx)(x,{id:r.id,image:r.image,title:r.title,description:r.description,address:r.address,creatorId:r.creator,coordinates:r.location,onDelete:e.onDeletePlace},r.id)))});var _=s(1688);const f=[{id:"p1",title:"Empire State Building",description:"One of the most famous places",imageUrl:"https://th.bing.com/th/id/OLC.lp5u7VeEyp0Iew480x360?&rs=1&pid=ImgDetMain",address:"350 5th Ave, New York, NY 10001",location:{lat:40.74837,lng:-73.98464},creator:"u1"},{id:"p2",title:"Empire State EState",description:"One of the most famous places",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/View_of_Empire_State_Building_from_Rockefeller_Center_New_York_City_dllu_Cropped.jpg/330px-View_of_Empire_State_Building_from_Rockefeller_Center_New_York_City_dllu_Cropped.jpg",address:"350 5th Ave, New York, NY 10001",location:{lat:40.74837,lng:-73.98464},creator:"u2"}],C=e=>{const r=(0,_.useParams)().userId,{isLoading:s,sendRequest:a,error:n,clearError:l}=(0,m.x)(),[o,i]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{const e=await a(`https://shareplaces-3oeh.onrender.com/api/places/user/${r}/`);i(e.places)}catch(e){}})()}),[a,r]);return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(u.A,{error:n,onClear:l}),s&&(0,c.jsx)("div",{className:"center",children:(0,c.jsx)(p.A,{asOverlay:!0})}),!s&&o&&(0,c.jsx)(j,{items:o,onDeletePlace:e=>{i((r=>r.filter((r=>r.id!==e))))}})]})}},837:(e,r,s)=>{s.d(r,{A:()=>a});s(5043);var t=s(579);const a=e=>(0,t.jsx)("div",{className:`card ${e.className}`,style:e.style,children:e.children})},9626:(e,r,s)=>{s.d(r,{A:()=>l});s(5043);var t=s(8630),a=s(8347),n=s(579);const l=e=>(0,n.jsx)(t.A,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,n.jsx)(a.A,{onClick:e.onClear,children:"Okay"}),children:(0,n.jsx)("p",{children:e.error})})},8630:(e,r,s)=>{s.d(r,{A:()=>i});var t=s(5043),a=s(3006),n=s(8336),l=s(7950),o=s(579);const c=e=>{const r=(0,o.jsxs)("div",{className:`modal ${e.className}`,style:e.style,children:[(0,o.jsx)("header",{className:`modal__header ${e.headerClass}`,children:(0,o.jsx)("h2",{children:e.header})}),(0,o.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:e=>e.preventDefault(),children:[(0,o.jsx)("div",{className:`modal__content  ${e.contentClass}`,children:e.children}),(0,o.jsx)("footer",{className:`modal__footer ${e.footerClass}`,children:e.footer})]})]});return(0,l.createPortal)(r,document.getElementById("modal-hook"))},i=e=>(0,o.jsxs)(t.Fragment,{children:[e.show&&(0,o.jsx)(a.A,{onClick:e.onCancel}),(0,o.jsx)(n.A,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,o.jsx)(c,{...e})})]})},171:(e,r,s)=>{s.d(r,{x:()=>a});var t=s(5043);const a=()=>{const[e,r]=(0,t.useState)(!1),[s,a]=(0,t.useState)(),n=(0,t.useRef)([]),l=(0,t.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(!0);const o=new AbortController;n.current.push(o);try{const a=await fetch(e,{method:s,body:t,headers:l,signal:o.signal}),c=await a.json();if(n.current=n.current.filter((e=>e!==o)),!a.ok)throw new Error(c.message);return r(!1),c}catch(c){throw a(c.message),r(!1),c}}),[]);return(0,t.useEffect)((()=>()=>{n.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:s,sendRequest:l,clearError:()=>{a(null)}}}}}]);
//# sourceMappingURL=420.6699842b.chunk.js.map